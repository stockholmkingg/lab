# Язык С и программные уязвимости
## Задание 1
### Легенда
У вас есть следующий код:
```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
    /* выделяем буфер из 255 символов + \0 для хранения команды */
    char command[256] = {'p', 'i', 'n', 'g', ' ', '\0'};
    /* буфер для хранения хоста, который нужно пропинговать */
    char host[16];

    printf("please enter host for ping\n");
    /* получаем от пользователя имя хоста - нужно ввести в консоли, например, ya.ru и нажать Enter */
    gets(host);

    /* отладочный вывод - печатаем команду */
    printf("command: %s\n", command);
    /* отладочный вывод - печатаем хост */
    printf("host: %s\n", host);

    /* добавляем к команде хост, при этом \0 в команде заменяется на первый символ из host */
    strcat(command, host);

    /* отладочный вывод - печатаем полную команду */
    printf("full command: %s\n", command);

    /* выполняем команду */
    system(command);

    return 0;
}
```
### Задача
По аналогии с лекцией установите необходимые зависимости (<code>apt update && apt install gcc</code>) и скомпилируйте данную программу (<code>cc main.c -o main</code>) - не обращайте внимание на предупреждения, если они будут.

1. Запустите её (<code>./main</code>), вы увидите приглашение вида:
![Ccode.png](..%2F..%2Fimages%2FCcode.png)
2. Введите адрес хоста, который необходимо пропинговать и убедитесь, что пинг работает:
![Ccode.v2.png](..%2F..%2Fimages%2FCcode.v2.png)
3. Завершите работу приложения с помощью сочетания клавиш Ctrl + C
Творческая часть: попробуйте подобрать данные (по аналогии с лекцией) так, чтобы:

Приложение "упало" (вы получили сообщение segmentation fault или другое, свидетельствующее об ошибке)
Вам удалось выполнить вместо <code>ping</code> другую команду
### Результаты
В качестве результата пришлите ответы на следующие вопросы:

1. Какое предупреждение (<code>Warning</code>) было выведено при компиляции? По желанию: проведите доп.исследование на предмет сути предупреждения (с чем оно связано, какие риски от использования одной из функций в программе и что это за функция).
2. Ввод, приводящий к падению приложения
3. Ввод, приводящий к выполнению другой команды (не <code>ping</code>)
## Задание 2
### Легенда
Программисты прислали вам якобы "исправленный" вариант программы <code>ping</code>:
```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
    /* выделяем буфер из 24 символов для хранения команды */
    char command[24] = "ping ";
    /* буфер для хранения хоста, который нужно пропинговать */
    char host[16];

    printf("please enter host for ping\n");
    /* получаем от пользователя имя хоста */
    /* нужно ввести в консоли, например, ya.ru и нажать Enter */
    fgets(host, sizeof(host), stdin);

    /* отладочный вывод - печатаем команду */
    printf("command: %s\n", command);
    /* отладочный вывод - печатаем хост */
    printf("host: %s\n", host);

    /* добавляем к команде хост, при этом \0 в команде заменяется на первый символ из host */
    strcat(command, host);

    /* отладочный вывод - печатаем полную команду */
    printf("full command: %s\n", command);

    /* выполняем команду */
    system(command);

    return 0;
}
```
### Задача
Проведите повторный анализ и посмотрите:

1. Можно ли реализовать переполнение?
2. Можно ли выполнить произвольную команду (если да, то как)?
3. Если ответ на п.2 - да, то можно ли получить shell (т.е. запустить <code>sh</code> и <code>bash</code> и продолжить работу с интерпретатором команд в интерактивном режиме)?
